{% extends 'base.html' %}
{% load static %}

{% block title %}가사생성 페이지{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/search.css' %}">

{% endblock %}

{% block content %}
<!-- 🔄 로딩 오버레이 -->
<!-- <div id="loadingOverlay" style="
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background-color: black;
  color: white;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
">
  <i class="xi-spinner-2 xi-spin"></i>Now Loading...
</div> -->

<div class="info-container">
  <div class="search-bar">
    <div class="input-wrapper">
      <input type="text" id="searchInput" placeholder="youtube로 검색하기"
        onkeypress="if(event.key==='Enter'){redirectSearch();}" autocomplete="off">
      <button id="micBtn"><i class="fas fa-microphone"></i></button>
      <button id="stopBtn" style="display: none;"><i class="fas fa-stop"></i></button>
      <div id="suggestions"></div>
    </div>
    <button class="search-btn" onclick="searchMusic()"><i class="fa-brands fa-youtube"></i></button>
  </div>
  <div class="info-box">
    <!-- 왼쪽 가사 영역 -->
    <div id="infoSection">
      <div class="video-wrapper">
        <iframe id="youtubePlayer" allowfullscreen></iframe>
      </div>

      <div class="album-info">
        <div class="album-cover">
          <img id="albumCover" src="" alt="앨범 커버">
        </div>
        <div class="song-info">
          <div class="info-title">
            <span></span>
            <h2><i class="fa-duotone fa-solid fa-record-vinyl fa-lg"></i> 곡 정보 </h2>
            <button id="favoriteBtn">🤍</button>
          </div>
          <div id="infoContent">정보 로딩 중...</div>
        </div>
      </div>
    </div>

    <!-- 오른쪽 정보 영역 -->
    <div id="lyricsSection">
      <h2><span class="material-symbols-outlined">lyrics</span> 가사</h2>
      <div class="translation-buttons">
        <button onclick="translateLyrics('ko')">한국어</button>
        <button onclick="translateLyrics('en')">영어</button>
        <button onclick="translateLyrics('ja')">일본어</button>
        <button onclick="translateLyrics('zh')">중국어</button>
      </div>
      <div id="lyricsContent">가사 로딩 중...</div>
    </div>
  </div>
</div>

{% endblock %}

{% block extra_script %}
<script src="{% static 'js/base.js' %}"></script>
<!-- <script src="{% static 'js/search.js' %}"></script> -->
<script src="{% static 'js/lyrics_info.js' %}"></script>
<script>const API_KEY = "{{ youtube_api_key }}";</script>


{% endblock %}