{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/post_detail.css' %}">
{% endblock %}

{% block content %}
<div class="post-detail-container">

  <!-- 상단: 뒤로가기 + 글쓰기 버튼 -->
  <div class="post-detail-actions">
    <a href="{% url 'post_list' %}" class="btn-back">← 게시판으로</a>
    {% if user.is_authenticated %}
      <a href="{% url 'post_create' %}" class="btn-write">글쓰기</a>
    {% endif %}
  </div>

  <!-- 제목 + 작성자 + 썸네일 -->
  <div class="post-header">
    <div class="title-area">
      <h1 class="post-title">{{ post.title }}</h1>
      <p class="post-meta">
        {{ post.user.nickname }} · {{ post.created_at|date:"Y년 n월 j일 g:i A" }}
      </p>
    </div>

    {% if post.thumbnail %}
      <img src="{{ post.thumbnail.url }}" alt="썸네일" class="post-thumbnail">
    {% endif %}
  </div>

  <!-- 본문 -->
  <div class="post-body">
    <p class="post-description">{{ post.description }}</p>
  </div>

  <!-- 좋아요 -->
  {% if user.is_authenticated %}
    <form method="post" action="{% url 'like_post' post.id %}">
      {% csrf_token %}
      <button type="submit" class="btn-like">
        {% if liked %}
          ❤️ 좋아요 취소
        {% else %}
          🤍 좋아요
        {% endif %}
        ({{ post.post_likes.count }})
      </button>
    </form>
  {% endif %}

</div>
{% endblock %}

{% block extra_script %}
  <script src="{% static 'js/base.js' %}"></script>
{% endblock %}
