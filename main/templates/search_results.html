{% extends 'base.html' %}
{% load static %}

{% block title %}검색 결과{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/search_results.css' %}">
{% endblock %}

{% block content %}
<div class="search-results-container">
  <div class="search-box" id="searchBox">
    <input type="search" placeholder="와 씨 그냥 집에 가고 싶다" />
    <button><i class="fa-solid fa-magnifying-glass"></i></button>
  </div>

  <h2 class="search-title">"{{ query }}" 검색 결과</h2>

  {% if results %}
    <ul class="search-result-list">
      {% for song in results %}
        <li>
          <a href="{% url 'music_info' %}?title={{ song.title|urlencode }}&artist={{ song.artist|urlencode }}">
            <strong>{{ song.title }}</strong> - {{ song.artist }}
            <br>
            <small>장르: {{ song.normalized_genre }}</small>
          </a>
        </li>
      {% endfor %}
    </ul>

    <div class="pagination">
      {% if results.has_previous %}
        <a href="?q={{ query }}&page={{ results.previous_page_number }}">이전</a>
      {% endif %}

      {% for num in results.paginator.page_range %}
        {% if num == results.number %}
          <strong>{{ num }}</strong>
        {% else %}
          <a href="?q={{ query }}&page={{ num }}">{{ num }}</a>
        {% endif %}
      {% endfor %}

      {% if results.has_next %}
        <a href="?q={{ query }}&page={{ results.next_page_number }}">다음</a>
      {% endif %}
    </div>
  {% else %}
    <p class="no-result">검색 결과가 없습니다.</p>
  {% endif %}
</div>

<script src="{% static 'js/main.js' %}"></script>
{% endblock %}
