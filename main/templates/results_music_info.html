{% extends "base.html" %}
{% load static %}

{% block title %}곡 정보{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/results_music_info.css' %}">
{% endblock %}

{% block content %}
<div class="results-container">
  <!-- 🔍 검색창 -->
  <div class="search-box" id="searchBox">
    <input type="search" placeholder="와 씨 그냥 집에 가고 싶다" />
    <button><i class="fa-solid fa-magnifying-glass"></i></button>
  </div>

  <!-- 🎯 Grid 레이아웃 -->
  <div class="results-grid">
    <!-- (1,1): 앨범 커버 -->
    <div class="album-cover">
      <img src="{{ song.cover_url }}" alt="앨범 커버">
    </div>

    <!-- (1,2): 곡 정보 -->
    <div class="song-info">
      <h2> {{ song.title }}</h2>
      <p><strong>가수:</strong> {{ song.artist }}</p>
      <p><strong>발매일:</strong> {{ song.release_date }}</p>
      <p><strong>장르:</strong> {{ song.genre }}</p>

      <!-- ❤️ 좋아요 -->
      <button id="likeButton"
              data-title="{{ song.title }}"
              data-artist="{{ song.artist }}"
              class="like-btn">
        {% if is_liked %}❤️{% else %}🤍{% endif %}
      </button>
      <p id="likeCountDisplay">
        ❤️ <span id="likeCountValue">{{ like_count|default:"0" }}</span>명 좋아요
      </p>
    </div>

    <!-- (1~2,3): 좋아요 목록 -->
    <div class="like-box">
      <h3 class="like-box-title">❤️ 좋아요 목록</h3>
      <div class="like-box-scroll">
        <ul class="like-list">
          {% for liked_song in liked_songs %}
            <li>
              <strong>{{ liked_song.title }}</strong><br>
              <span>{{ liked_song.artist }}</span>
            </li>
          {% empty %}
            <li>좋아요한 곡이 없습니다.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <!-- (2,1~2): 가사 -->
    <div class="lyrics-box">
      <h3> 가사</h3><br>
      <div id="lyrics-preview">
        {% for line in song.lyrics.splitlines %}
          <div>{{ line }}</div>
        {% endfor %}
      </div>
      <button id="toggle-lyrics" class="toggle-lyrics-btn">더보기 ▼</button>
    </div>
  </div>
</div>

<script src="{% static 'js/main.js' %}"></script>
{% endblock %}
